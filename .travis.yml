language: java
jdk:
- openjdk11
cache:
  directories:
  - "$HOME/.m2/repository"
branches:
  only:
  - master
  - "/^iterator-wro4j-extensions-[0-9]+\\.[0-9]+\\.[0-9]+/"
after_success:
- mvn clean test jacoco:report coveralls:report
- test "${TRAVIS_PULL_REQUEST}" == "false" && test "${TRAVIS_TAG}" != "" && mvn deploy
  --settings settings.xml
env:
  global:
  - secure: Lm2UsT/JEgYaoL8b4CkRE9wWvavvGjfs+lR/8ur5t+MkM6OZ8I2eDW6ZWCv2Tcoc2uJ/3KgvQG8SWOKAvjsOTOoKESTEvvP5vYGRZyiDCv8AlpVfHDTrNmlQu8CE/gn9WebJiLEyHYLI+ESM+6jEYHDYPp6LAVv2E4pg6CtDZZ5uKXaTvuCrymyL1HPBFdZn+7SYhY6by7+5P7PtexUSX43Fmom5uAQTG5FWh3yyi+64/3fthDQTrHIZqgqDfQV56eUzEkC0Xz26gvGhQpFvcgXM7W+zx4JA0qj+8Joxuzhbh0xT13HcfCdz1GNPH4zeGEhW6S3D69Z4s8LUbl38wXN0JRhZLy4cjQwP35g1bIzY+tVNS6NZwIxWF2+B/DgDEQYNmUkfY5Rr69Qg5ZgM4k/JlZV4+oTm56oS8dwOxNoAbwPo9WUY2B90nD0sdcmKHJCDNcYbwzvJzXTMP2GtMqkZfMgjuDt/K3pU7gQIaEHOHKhkkXAn0wZg6We5j+FWNkMvWpFZQXSIzkkLI6QljY206DtGWd3rv7GrlOaGl4JpcUKGJwUwJDIEFILQ0z/qn8NLhrFetdBmS/OKNNiVxqfrLDcm4TwMb12B2EKQ8HD89s9tthZKgaq3YecoiQa5Fzw/11yIwDsiRgRIq5ezvi4kUoY9MaRpGVWalHCFeWM=
  - secure: VlVV7EpM9WA92HrfKUUHRSMxP0MmVmqG10dbdSgjoJ+Vusk3MfSrQhFvDr7yjL7y+sNxthFWS4hW3XV2QefCz6/X930WZWYo1yZ3kJ1ELWpoKsFZafU2G2ueDevZ5mTgDHy37ggYcxnCPqGNgJ5bAdDYy1NPuBeimoe7csIVtdl/u9apxQYDdIMw5N2TNnyJI2pCjXsBTP9s/k3X58v0LUMxlUBNwY1U3Ifd00v4v0HvflZ9sQyZybmpK3HX5RgH6SS+/HNLStu0fHdpo4pFsVWHw/YjHqsPXeapAnJIGsuV1TkehrDQKwqk+2obHxhYYK6B/cfnTaImKQWowztiNc0yvHx9X0gppywMSHCyUPDYIt1XWLmmIVZFvNw9meDbj7T0udCR7WVU/hlCqJpatOkHPbEWGG7GrJQXbsZoS+4UCAGRwCc3vtcwUFerVdWtHlSswQrcNhwN+BIaBrY1Uer+2hhXOmnUidilNtzHl3Rw2qUOnS3iscnNXR7+UWT4Nu+bbe8QnYHVfOI3xVWfcgRk/wcFdVZyESayEXT1DSU/BhpVJfMaXpAHTnkt5oyHmvjI5JSS4RvXa1NgeOolhTBnTiXmzw04KoVqLl64pOr8RFUItaB/SL0e8qz3dGGGhsB4QgSl+IHLk0kiAvcjhhSUvLlOv0hZe1DqMLfjv0w=
  - secure: z2HpLnfCb5W9XGg0g+BWJaixpBwCB8hJVXvAx/FepcKMr5xaJFyQSxNlPgIrcTJsmrBfU25xRB4ZrEEtFjcBsOqJHhvBZznKiOMFHRyWL0A2+glLrolf0DXaWw3Pk6Iw/aPI0o3W160wIziFaIg9b2bOS98RElvCa9kkHFk6VdGz/03IrA7EEaryaCwKH4uihz55yFpEasrTtHoQptsuatMR/WDTOb15GC9Lr3ZYAEHu/YEMc1h6XlynKDASzOuyV2N6jbJtg9x7ZmJibK7X/jltCQCGW/QzRwphUMlDGYg2zPit+21kpqNiu5K9KQCyE5x2hTNhsvBkPtAA9jZE+IGp8effCp1uPUdOHVv1xJus1JNzjK4+hurJarRy7ACi+UEqSNpITZtX64K+3C1zGj1yzVNxUeC7/2jTn7KOH5S1hMi9WStJmv/blflFe36kqxHZaI5iiSJ8uDOxlwxuiNTH9RVG3bjB9/Zvx4BgnNYkFtJ0jPzaSfjMOavTRK9oKDDj2F5waonnGyIt5U8bZh3cyXmuOkRc1Oud+jHIs2fG9iBlwc+TaYAKTvW3lvA8i2DVkjIXdHI/hKO5RqoDNvtJjZjoRdBgeePgmYVC2xp016QAXR6Y0LJdxifAc0UAVHDquvgoDuxtQi0ZMlj8uzz+3sPD2I19BLkyN4XiBGk=
addons:
  sonarcloud:
    organization: iteratoruk
    token:
      secure: "TL2ZQNg6rHGw9fjOIWKj2GYr1BzipNEuNTzd8r3pmBZYvxXagkCmTp5TL6G/gEstWXq5UBHbAmtM9eIczTWKp2u/SXMJWxmD3AAmj4b35qAt3nlyvR2E94lE5cBm5+5LjD8aJVStr/eSfQgcOl4FvwFxnVSoasdRVDiusnQDcejn36L0A5b5mebZzTBra21kR4aP/J5Byxo/5MMD5SvyhYjiY6rXxgbVR+rRpcWXd4Gbkdx1wtj9G/FU2/9oJ9mP60g3Lf9jQL32Bz6p5Y1sNcgFhRkeyl+0qNjdv+8YGV6r0//i4Arf+n+of0jN7ygtXgng4Wn99TDo9NisEzgvmfY98eBM4k5n3xWxtgn2Or1MaGs9xaYtVwdBB/Xxr22NPY6u/rlMEB2mm9vRepzYuxqU1f8ueTkUcPJGPsEhP6FAMQeYnMXG6VNlnEqtKk/GrDZ1snNjKphblGaU2HiuYM+mRCyfNWnyNg1H+HGt/azc28wRZU1/IFDHxOlgUn5g8pCRkmw06I6w6giVVPxs11SLmQJca6oZvwn9cp5xyZJW0qTuNnfoP5WB7flyaUriZKk+/jRcwXGts2aQ7wBxwJWOZGcn2ZqYbv/KVjahPvh7QBndAzXtNfe8j6A95QCLETIYLuGu0FUPVo2jRo49O003MQXTjtRo6QlQA2TrS+I="
script:
- mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=iteratoruk_iterator-wro4j-extensions
